<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GastoFlow Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh;
            margin: 0;
            font-family: sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- PEGA TU API KEY AQUÃ ---
        const API_KEY = "TU_API_KEY_AQUI"; 

        function App() {
            const [cat, setCat] = useState('Personal');
            const [config, setConfig] = useState(() => {
                const salvo = localStorage.getItem('gf_final_v1');
                return salvo ? JSON.parse(salvo) : {
                    nombres: ['Personal', 'Obra 1', 'Obra 2', 'Obra 3', 'Obra 4'],
                    gastos: { 'Personal': [], 'Obra 1': [], 'Obra 2': [], 'Obra 3': [], 'Obra 4': [] }
                };
            });

            useEffect(() => {
                localStorage.setItem('gf_final_v1', JSON.stringify(config));
            }, [config]);

            const total = (config.gastos[cat] || []).reduce((a, b) => a + b.m, 0);

            return (
                <div className="max-w-md mx-auto p-4 pb-20 text-white">
                    <header className="flex justify-between items-center py-6">
                        <h1 className="text-2xl font-black italic">GastoFlow IA</h1>
                        <div className="bg-white/20 p-3 rounded-2xl backdrop-blur-md">ðŸ“·</div>
                    </header>

                    <div className="flex gap-2 overflow-x-auto pb-6 no-scrollbar">
                        {config.nombres.map(n => (
                            <button 
                                key={n}
                                onClick={() => setCat(n)}
                                className={`px-5 py-2 rounded-full text-xs font-bold transition-all ${cat === n ? 'bg-white text-indigo-600' : 'bg-white/20 text-white'}`}
                            >
                                {n}
                            </button>
                        ))}
                    </div>

                    <div className="bg-white/10 backdrop-blur-xl border border-white/20 p-8 rounded-[2.5rem] shadow-2xl mb-8">
                        <p className="text-[10px] font-bold opacity-70 uppercase tracking-widest mb-1">{cat}</p>
                        <h2 className="text-5xl font-black">${total.toFixed(2)}</h2>
                    </div>

                    <div className="space-y-4">
                        <h3 className="font-bold ml-2">Movimientos</h3>
                        {config.gastos[cat].length === 0 && <p className="text-center opacity-50 py-10 italic">Sin gastos aÃºn</p>}
                        {config.gastos[cat].map(g => (
                            <div key={g.id} className="bg-white/10 backdrop-blur-md p-4 rounded-3xl border border-white/10 flex justify-between items-center">
                                <div><p className="font-bold">{g.d}</p><p className="text-[10px] opacity-60 uppercase">{g.f}</p></div>
                                <p className="font-black text-lg">${g.m.toFixed(2)}</p>
                            </div>
                        ))}
                    </div>

                    <button 
                        onClick={() => {
                            const d = prompt("Gasto:"); const m = prompt("Monto:");
                            if(d && m) {
                                const ng = { ...config.gastos };
                                ng[cat] = [{id: Date.now(), d, m: parseFloat(m), f: new Date().toLocaleDateString()}, ...ng[cat]];
                                setConfig({...config, gastos: ng});
                            }
                        }}
                        className="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white text-indigo-600 font-black px-10 py-4 rounded-2xl shadow-2xl active:scale-95 transition-transform"
                    >
                        + AÃ‘ADIR MANUAL
                    </button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
